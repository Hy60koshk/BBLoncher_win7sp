<!DOCTYPE html>
<html>
<head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<link href='images/icon.png' rel='icon' type='image/png'/>
<title>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä BBL√∂ncher</title>
<script language='JavaScript' src='/js/jquery-3.5.1.min.js' type='text/javascript'></script>
<script language='JavaScript' src='/js/kb.collections.js' type='text/javascript'></script>
<script language='JavaScript' src='/js/koshkbench_1.6.js' type='text/javascript'></script>

<link href='https://koshk.sbs/css/kbcore.css' rel='StyleSheet' type='text/css'/>
<link href='https://koshk.sbs/koshkbench/css/kbench.css' rel='StyleSheet' type='text/css'/>
<script>
;var CookieObject = (function() {
	var cookieObj = {}
	var decodedCookie = decodeURIComponent(document.cookie);
	var cookies = decodedCookie.split(';');

	for (let i = 0; i < cookies.length; i++) {
		let cookie = cookies[i].split('=')
		if (cookie.length < 2) continue
		let cookieKey = cookie[0].trim()
		cookieObj[cookieKey] = cookie[1]
	}

	return cookieObj
})();

var adminIdSet = false, adminId = null, loadingBlocker$ = null;

$.ajaxSetup({ cache: false });

function onOperationSuccess(data, _adminId, successMsg) {
	if (data.success) {
		if (!adminIdSet) {
			document.cookie = 'adminId=' + _adminId + '; expires=Fri, 30 Dec 2050 13:37:00 GMT; SameSite=Strict';
			adminId = _adminId
			adminIdSet = true
		}
		if (successMsg !== undefined) {
			alert("\r\n\r\n" + successMsg + "\r\n\r\n")
		}
	} else {
		alert("\r\n\r\n" + data.error + "\r\n\r\n")
	}
}

function cfgApiCall(args, onSuccess, onFail) {
	args = args || {}
	args.adminToken = adminId || adminIdInput$.val()
	
	loadingBlocker$.show()

	$.ajax({
		url: "cfgapi.php"
		, method: "POST"
		, dataType: "json"
		, data: args
		, success: function(data) {
			loadingBlocker$.hide()
			if (data.success) {
				if (typeof onSuccess === "string") {
					onOperationSuccess(data, args.adminToken, onSuccess)
				}
				else {
					onOperationSuccess(data, args.adminToken)
					if (onSuccess) {
						onSuccess(data)
					}
				}
			}
			else if (onFail) {
				onFail(data)
			}
			else {
				alert("–û—à–∏–±–∫–∞:\r\n" + data.error)
			}
		}
		, error: function(xr, errortext, exception) {
			loadingBlocker$.hide()
			alert(errortext + ":\r\n" + exception)
			if (onFail) {
				onFail()
			}
		}
	})
}

$(function() {
	(function() {
	HTMLElement.prototype.appendTag = function(tag) {
		return this.appendChild(document.createElement(tag))
	}
	HTMLElement.prototype.prependTag = function(tag) {
		var prepended = document.createElement(tag)
		this.prepend(prepended)
		return prepended
	}
	HTMLElement.prototype.attr = function(attr, value) {
		this.setAttribute(attr, value)
		return this
	}
	HTMLElement.prototype.onCheckedChange = function(callback) {
		this.addEventListener('change', (event) => { callback(event.target.checked) })	
		return this
	}
	HTMLElement.prototype.checkChange = function(value) {
		this.checked = value
		var evt = document.createEvent("HTMLEvents");
		evt.initEvent("change", false, true);
		this.dispatchEvent(evt);
		return this
	}
	var _ge = function(id) { return document.getElementById(id) }
	var _trackChange = function(id, callback) {
		_ge(id).addEventListener('change', (event) => { callback(event.target.checked) })	
	}

	loadingBlocker$ = $('#loadingBlocker')

	function SettingsFieldInput(fieldData) {
		var valType = fieldData.ValType
		var forbidden = fieldData.Forbidden
		var allowEmpty = fieldData.AllowEmpty
		this.Key = fieldData.Key
		this.Container$ = $('<div class="settingInputContainer inputField">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var label$ = $('<span class="settingLabel">').appendTo(this.Container$).text(fieldData.Label)
		var input$;
		if (fieldData.TextArea) {
			input$ = $('<textarea class="settingInput">').appendTo(this.Container$)
			if (fieldData.Height) {
				input$.css('height', fieldData.Height)
			}
		}
		else {
			input$ = $('<input type="text" class="settingInput" autocomplete="off">').appendTo(this.Container$)
		}
		if (fieldData.Title) {
			label$.attr('title', fieldData.Title)
		}
		if (fieldData.Width) {
			input$.css('width', fieldData.Width)
		}
		this.val = function() {
			if (arguments.length) {
				return input$.val(arguments[0])
			}
			var thevalue = input$.val()
			if (valType) {
				try {
					if (valType == 'int') {
						thevalue = parseInt(thevalue)
						return isNaN(thevalue) ? undefined : thevalue
					}
					else if (valType == 'float') {
						thevalue = parseFloat(thevalue)
						return isNaN(thevalue) ? undefined : thevalue
					}
				} catch {
					return undefined
				}
			}
			thevalue = "" + thevalue
			if (forbidden) {
				var accept = true
				for (var brrbrr = 0; brrbrr < forbidden.length; brrbrr++) {
					if (!(accept = (thevalue.indexOf(forbidden[brrbrr]) < 0))) {
						var errorstr = "–û—à–∏–±–∫–∞:\n" + fieldData.Key + " –∏–º–µ–µ—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ " + thevalue
						alert(errorstr)
						throw errorstr
					}
				}
			}
			return (thevalue.length || allowEmpty) ? thevalue : undefined
		}
		this.reset = function() {
			input$.val('')
		}
	}
	function SettingsFieldList(fieldData) {
		this.Key = fieldData.Key
		this.Container$ = $('<div class="settingInputContainer inputList">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var label$ = $('<span class="settingLabel">').appendTo(this.Container$).text(fieldData.Label)
		if (fieldData.Title) {
			label$.attr('title', fieldData.Title)
		}
		var input$ = $('<textarea class="settingList" rows=3>').appendTo(this.Container$)
		if (fieldData.Width) {
			input$.css('width', fieldData.Width)
		}
		if (fieldData.Rows) {
			input$.attr('rows', fieldData.Rows)
		}
		this.val = function() {
			if (arguments.length) {
				return input$.val(arguments[0].join('\n'))
			}
			var vall = input$.val()
			return vall.length ? vall.split('\n') : undefined
		}
		this.reset = function() {
			input$.val('')
		}
	}
	function SettingsFieldListoflists(fieldData) {
		this.Key = fieldData.Key
		this.Container$ = $('<div class="settingInputContainer inputListOfLists">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var label$ = $('<span class="settingLabel">').appendTo(this.Container$).text(fieldData.Label)
		if (fieldData.Title) {
			label$.attr('title', fieldData.Title)
		}
		var input$ = $('<textarea class="settingList" rows=3>').appendTo(this.Container$)
		if (fieldData.Width) {
			input$.css('width', fieldData.Width)
		}
		if (fieldData.Rows) {
			input$.attr('rows', fieldData.Rows)
		}
		this.val = function() {
			var vall, ll, line;
			if (arguments.length) {
				vall = ""
				if (arguments[0] && arguments[0].length) {
					for (ll = 0; ll < arguments[0].length; ll++) {
						vall += arguments[0][ll].join('|') + '\n'
					}
				}
				return input$.val(vall)
			}
			vall = input$.val().trim()
			if (vall.length) {
				vall = vall.split('\n')
				for (ll = 0; ll < vall.length; ll++) {
					line = vall[ll].trim()
					if (line.length) {
						vall[ll] = line.split('|')
					}
					else {
						vall.splice(ll, 1)
						ll--
					}
				}
				return vall
			}
			return undefined
		}
		this.reset = function() {
			input$.val('')
		}
	}
	function SettingsFieldCheck(fieldData) {
		this.Key = fieldData.Key
		var _important = fieldData.Important
		this.Container$ = $('<div class="settingInputContainer check">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var label$ = $('<label class="settingLabel">').appendTo(this.Container$)
		if (fieldData.Title) {
			label$.attr('title', fieldData.Title)
		}
		var input$ = $('<input type="checkbox" class="settingInput">').appendTo(label$)
		label$.append($('<span>').text(fieldData.Label))

		this.val = function() {
			var cb = input$[0]
			if (arguments.length) {
				if (arguments[0] === true || arguments[0] == 'true') {
					cb.checked = true;
				} else {
					cb.checked = false;
				}
			}
			return cb.checked ? true : (_important ? false : undefined)
		}
		this.reset = function() {
			input$[0].checked = false;
		}
	}
	function SettingsButton(fieldData) {
		this.Key = fieldData.Key
		this.Container$ = $('<div class="settingInputContainer button">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var _self = this
		var input$ = $('<div class="settingButton">').appendTo(this.Container$).text(fieldData.Label)
		if (fieldData.Title) {
			input$.attr('title', fieldData.Title)
		}
		if (typeof fieldData.Action == 'function') {
			_self.Activate = function(onSuccess, onFail) {
				fieldData.Action(_self.Fields, fieldData, onSuccess, onFail)
			}
			input$.click(function() {
				_self.Activate()
			})
		}
		this.val = function() {
			return undefined
		}
		this.reset = function() { }
	}
	function SettingsFieldSelect(fieldData) {
		this.Key = fieldData.Key
		var _default = fieldData.Default
		this.Container$ = $('<div class="settingInputContainer select">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var label$ = $('<span class="settingLabel">').appendTo(this.Container$).text(fieldData.Label)
		if (fieldData.Title) {
			label$.attr('title', fieldData.Title)
		}
		var input$ = $('<select class="settingInput">').appendTo(this.Container$)
		for (let i = 0; i < fieldData.Options.length; i++) {
			let optData = fieldData.Options[i]
			let opt = $('<option>').appendTo(input$).attr('value', optData.Value).text(optData.Text)
			if (optData.Selected) {
				opt.attr('selected', '')
			}
		}

		this.val = function() {
			if (arguments.length) {
				input$.val(arguments[0])
			}
			var vall = input$.val()
			return (vall == _default) ? undefined : vall
		}
		this.reset = function() {
			input$.val(_default)
		}
	}

	function SettingsSpawner(fieldData) { //key, label, Title, spawnData) {
		var _self = this
		var _hidden = false
		this.Key = fieldData.Key
		var spawns = new List()
		this.Container$ = $('<div class="settingInputContainer spawner">')
		if (fieldData.Class) {
			this.Container$.addClass(fieldData.Class)
		}
		var label$ = $('<div class="settingSpoilerTitle">').appendTo(this.Container$).text(fieldData.Label).click(function() {
			_self.Toggle()
		})
		if (fieldData.Title) {
			label$.attr('title', fieldData.Title)
		}
		var spawner$ = $('<div class="settingSpawnerPlus">').text('+').attr('title', '–î–æ–±–∞–≤–∏—Ç—å').appendTo(this.Container$).click(function() {
			_self.Spawn()
		})
		var content$ = $('<div class="settingSpoilerContent">').appendTo(this.Container$)
		var incontentSpawner$ = $('<div class="settingSpawnerPlusIncontent">').text('+').attr('title', '–î–æ–±–∞–≤–∏—Ç—å').appendTo(content$).click(function() {
			_self.Spawn()
		})

		this.Toggle = function() {
			_self[_hidden ? 'Show' : 'Hide']()
		}
		this.Hide = function() {
			_hidden = true
			label$.addClass('hidden')
			content$.hide()
		}
		this.Show = function() {
			_hidden = false
			label$.removeClass('hidden')
			content$.show()
		}
		this.Remove = function(spawn) {
			spawn.Container$.remove()
			spawns.remove(spawn)
			spawn.Parent = null
			if (spawns.Count < 1) {
				incontentSpawner$.show()
			}
		}
		this.Spawn = function() {
			incontentSpawner$.hide()
			var spawn = new SettingsSpawn(fieldData.SpawnData)
			spawns.add(spawn)
			spawn.Parent = _self
			content$.append(spawn.Container$)
			spawn.Container$[0]._settingField = spawn
			return spawn
		}
		this.Duplicate = function(spawntc) {
			var spawn = new SettingsSpawn(fieldData.SpawnData)
			spawns.add(spawn)
			spawn.Parent = _self
			spawntc.Container$.after(spawn.Container$)
			spawn.Container$[0]._settingField = spawn
			spawn.val(spawntc.val())
			return spawn
		}
		this.MoveDown = function(spawn) {
			if (spawns.swapForward(spawn)) {
				spawns.find(spawn).prev.value.Container$.after(spawn.Container$)
			}
		}
		this.MoveUp = function(spawn) {
			if (spawns.swapBackward(spawn)) {
				spawns.find(spawn).next.value.Container$.before(spawn.Container$)
			}
		}

		this.reset = function() {
			spawns.forEach(function(node) {
				_self.Remove(node.value)
			})
		}
		this.val = function() {
			var arr
			if (arguments.length) {
				arr = arguments[0]
				spawns.forEach(function(node) {
					_self.Remove(node.value)
				})
				if (arr instanceof Array && arr.length) {
					for (let i = 0; i < arr.length; i++) {
						let spawn = _self.Spawn()
						spawn.val(arr[i])
					}
				}
			}
			else {
				arr = []
				spawns.forEach(function(node) {
					var spawnval = node.value.val()
					if (spawnval) {
						arr.push(spawnval)
					}
				})
				return arr.length ? arr : undefined
			}
		}
		if (!fieldData.OpenByDefault) {
			_self.Hide()
		}
	}

	function SettingsSpoiler(spawnData) {
		var _self = this
		var _hidden = false
		this.Key = spawnData.Key
		var fields = []
		this.Container$ = $('<div class="settingInputContainer spoiler">')
		if (spawnData.Class) {
			this.Container$.addClass(spawnData.Class)
		}
		var label$ = $('<div class="settingSpoilerTitle">').appendTo(this.Container$).text(spawnData.Label).click(function() {
			_self.Toggle()
		})
		if (spawnData.Title) {
			label$.attr('title', spawnData.Title)
		}
		var content$ = this.Content$ = $('<div class="settingSpoilerContent">').appendTo(this.Container$)

		this.Toggle = function() {
			_self[_hidden ? 'Show' : 'Hide']()
		}
		this.Hide = function() {
			_hidden = true
			label$.addClass('hidden')
			content$.hide()
		}
		this.Show = function() {
			_hidden = false
			label$.removeClass('hidden')
			content$.show()
		}

		if (spawnData.Fields) {
			for (let i = 0; i < spawnData.Fields.length; i++) {
				let fieldData = spawnData.Fields[i]
				if (fieldData) {
					let field;
					switch (fieldData.Type) {
						case "spawner":
							field = new SettingsSpawner(fieldData)
							break;
						case "spoiler":
							field = new SettingsSpoiler(fieldData)
							break;
						case 'check':
							field = new SettingsFieldCheck(fieldData)
							break;
						case 'select':
							field = new SettingsFieldSelect(fieldData)
							break;
						case 'list':
							field = new SettingsFieldList(fieldData)
							break;
						case 'listoflists':
							field = new SettingsFieldListoflists(fieldData)
							break;
						case 'button':
							field = new SettingsButton(fieldData)
							field.Fields = fields
							break;
						case 'field':
						default:
							field = new SettingsFieldInput(fieldData)
							break;
					}
					field._Key = fieldData.Key
					content$.append(field.Container$)
					field.Container$[0]._settingField = field
					fields.push(field)
				}
			}
		}

		this.reset = function() {
			_self.val({})
		}
		this.val = function() {
			var valobj = undefined
			if (arguments.length) {
				valobj = arguments[0]
				if (valobj && typeof valobj == 'object') {
					for (let i = 0; i < fields.length; i++) {
						let field = fields[i]
						if (valobj.hasOwnProperty(field._Key)) {
							field.val(valobj[field._Key])
						}
						else {
							field.reset()
						}
					}
				}
			}
			else {
				if (fields.length) {
					for (let i = 0; i < fields.length; i++) {
						let field = fields[i]
						let vall = field.val()
						if (vall !== undefined) {
							if (!valobj) {
								valobj = {}
							}
							valobj[field._Key] = vall
						}
					}
				}
				return valobj
			}
		}

		if (!spawnData.OpenByDefault) {
			_self.Hide()
		}
	}

	function SettingsSpawn(spawnData) {
		var _self = this
		var fields = []
		var _hidden = false
		this.Container$ = $('<div class="settingInputContainer spawn">')
		if (spawnData.Class) {
			this.Container$.addClass(spawnData.Class)
		}
		var label$, content$;
		
		if (spawnData.IsSpoiler) {
			label$ = $('<div class="settingSpoilerTitle">').appendTo(this.Container$).click(function() {
				_self.Toggle()
			})
			content$ = this.Content$ = $('<div class="settingSpoilerContent">').appendTo(this.Container$)

			this.Toggle = function() {
				_self[_hidden ? 'Show' : 'Hide']()
			}
			this.Hide = function() {
				_hidden = true
				label$.addClass('hidden')
				content$.hide()
			}
			this.Show = function() {
				_hidden = false
				label$.removeClass('hidden')
				content$.show()
			}

			if (!spawnData.OpenByDefault) {
				_self.Hide()
			}
		}
		else {
			label$ = $('<span class="settingLabel">').appendTo(this.Container$)
			content$ = this.Container$
		}

		if (spawnData.Title) {
			label$.attr('title', spawnData.Title)
		}
		if (typeof spawnData.Label != 'function') {
			label$.text(spawnData.Label)
		}
		
		var duplicate$ = $('<div class="settingSpawnerDuplicate">').text('‚ßâ').attr('title', '–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å').appendTo(this.Container$).click(function() {
			_self.Parent.Duplicate(_self)
		})
		var moveUp$ = $('<div class="settingSpawnerUp">').text('ü†π').attr('title', '–û–ø—É—Å—Ç–∏—Ç—å –≤ —Å–ø–∏—Å–∫–µ').appendTo(this.Container$).click(function() {
			_self.Parent.MoveUp(_self)
		})
		var moveDown$ = $('<div class="settingSpawnerDown">').text('ü†ª').attr('title', '–ü–æ–¥–Ω—è—Ç—å –≤ —Å–ø–∏—Å–∫–µ').appendTo(this.Container$).click(function() {
			_self.Parent.MoveDown(_self)
		})
		var remover$ = $('<div class="settingSpawnerMinus">').appendTo(this.Container$).text('-').attr('title', '–£–¥–∞–ª–∏—Ç—å').click(function() {
			let label = typeof spawnData.Label == 'function' ? spawnData.Label(fields) : spawnData.Label
			if (confirm("\n–í—ã –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ \"" + label + '".\n\n–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —ç—Ç–æ–≥–æ?\n–í—Å—è –≤–≤–µ–¥—ë–Ω–Ω–∞—è –≤ –µ–≥–æ –ø–æ–ª—è—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç —É—Ç–µ—Ä—è–Ω–∞.\n')) {
				_self.Parent.Remove(_self)
			}
		})

		if (spawnData.Fields) {
			for (let i = 0; i < spawnData.Fields.length; i++) {
				let fieldData = spawnData.Fields[i]
				if (fieldData) {
					let field;
					switch (fieldData.Type) {
						case "spawner":
							field = new SettingsSpawner(fieldData)
							break;
						case "spoiler":
							field = new SettingsSpoiler(fieldData)
							break;
						case 'check':
							field = new SettingsFieldCheck(fieldData)
							break;
						case 'select':
							field = new SettingsFieldSelect(fieldData)
							break;
						case 'list':
							field = new SettingsFieldList(fieldData)
							break;
						case 'listoflists':
							field = new SettingsFieldListoflists(fieldData)
							break;
						case 'button':
							field = new SettingsButton(fieldData)
							field.Fields = fields
							break;
						case 'field':
						default:
							field = new SettingsFieldInput(fieldData)
							break;
					}
					field._Key = fieldData.Key
					content$.append(field.Container$)
					field.Container$[0]._settingField = field
					fields.push(field)
				}
			}
		}

		this.reset = function() {
			_self.val({})
		}
		this.val = function() {
			var valobj = undefined
			if (arguments.length) {
				valobj = arguments[0]
				if (valobj && typeof valobj == 'object') {
					for (let i = 0; i < fields.length; i++) {
						let field = fields[i]
						if (valobj.hasOwnProperty(field._Key)) {
							field.val(valobj[field._Key])
						}
						else {
							field.reset()
						}
					}
				}
				if (typeof spawnData.Label == 'function') {
					label$.text(spawnData.Label(fields))
				}
			}
			else {
				if (fields.length) {
					for (let i = 0; i < fields.length; i++) {
						let field = fields[i]
						let vall = field.val()
						if (vall !== undefined) {
							if (!valobj) {
								valobj = {}
							}
							valobj[field._Key] = vall
						}
					}
				}
				return valobj
			}
		}
	}

	function getFileInfoObj(key, label, title, cls) {
		return {
			Type: key ? 'spoiler' : '_spawn_'
			, Key: key || '_spawn_'
			, Label: label || function(fields) {
					let name = fields.find(f => f.Key == 'Path').val()
					let order = fields.find(f => f.Key == 'OrderIndex').val()
					return '[' + (order !== undefined ? order : '1') + '] ' + (name ? name : '–ù–æ–≤—ã–π —Ñ–∞–π–ª')
				}
			, Title: title
			//, Class: 'fileinfo'
			, Class: (key ? 'fileinfo fileStatic ' : 'fileinfo fileSpawn ') + (cls || '')
			, IsSpoiler: true
			, Fields: [
				{
					Key: 'Path'
					, Label: '–ò–º—è/–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É: '
					, Forbidden: ['\\\\', '//', '*', '?', '"', ':', '<', '>', '|']
					, Width: '70%'
				}, {
					Key: 'Url'
					, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª: '
					, Width: '90%'
				}, {
					Key: 'Description'
					, Label: '–û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: '
					, Width: '90%'
				}, {
					Key: 'Tooltip'
					, Label: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: '
					, Width: '90%'
				}, {
					Key: 'UploadAlias'
					, Label: '–ò–º—è —Ñ–∞–π–ª–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º): '
					, Width: '400px'
				}, {
					Key: 'OrderIndex'
					, ValType: 'int'
					, Label: '–ü–æ—Ä—è–¥–æ–∫: '
					, Title: '–¶–µ–ª–æ–µ —á–∏—Å–ª–æ. –ß–µ–º –æ–Ω–æ –±–æ–ª—å—à–µ, —Ç–µ–º –Ω–∏–∂–µ —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ —Ñ–∞–π–ª–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "1". –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "-99".'
					, Width: '50px'
				}, {
					Type: 'select'
					, Key: 'Importance'
					, Label: '–í–∞–∂–Ω–æ—Å—Ç—å: '
					, Default: 0
					, Options: [
						{ Value: 0, Text: '–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ö—ç—à', Selected: true }
						, { Value: 1, Text: '–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–ª–∏—á–∏–µ, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ö—ç—à' }
						, { Value: 2, Text: '–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª' }
					]
				}, {
					Type: 'button'
					, Key: '__updateProps'
					, Class: 'fileUpdateProps'
					, Label: '–û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–∞–π–ª–∞'
					, Width: '40%'
					, Action: function(fields, fd, onSuccess, onFail) {
						var filename = fields.find(f => f.Key == 'Url').val()
						
						cfgApiCall(
							{
								action: 'getFileStats'
								, filename: filename
							}
							, function(data) {
								fields.find(f => f.Key == 'Size').val(data.FileSize)
								fields.find(f => f.Key == 'Hashes').val([data.Hash.toUpperCase()])
								if (onSuccess) {
									onSuccess(data.FileSize, data.Hash.toUpperCase())
								}
							}
							, onFail
						)
					}
				}, {
					Key: 'Size'
					, Label: '–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–±–∞–π—Ç): '
					, Width: '40%'
					, ValType: 'int'
				}, {
					Type: 'list'
					, Key: 'Hashes'
					, Label: '–°–ø–∏—Å–æ–∫ –≤–∞–ª–∏–¥–Ω—ã—Ö MD5-—Ö—ç—à–µ–π'
					, Width: '60%'
				}
			]
		};
	}

	function getGameVersionObj(isModGV) {
		var fields = isModGV ? [
				{
					Key: 'ExeVersion'
					, Label: '–í–µ—Ä—Å–∏—è –∏–≥—Ä—ã: '
					, Width: '250px'
				}, {
					Key: 'Name'
					, Label: '–ê–ª—å—Ç. –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞: '
					, Width: '400px'
				}, {
					Key: 'Description'
					, Label: '–ê–ª—å—Ç. –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–∞: '
					, Width: '90%'
				}, {
					Key: 'NeedsDonation'
					, Label: '–î–µ–Ω—å–≥–∏ –º–Ω–µ –ø–ª–æ—Ç–∏'
					, Type: 'check'
				}, {
					Type: 'spawner'
					, Key: 'FileGroups'
					, Class: 'groupedFilesForVersion'
					, Label: '–ì—Ä—É–ø–ø—ã —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤–µ—Ä—Å–∏–∏'
					, SpawnData: getFileGroupObj()
				}, {
					Type: 'spawner'
					, Key: 'Files'
					, Class: 'singleFilesForVersion'
					, Label: '–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –≤–µ—Ä—Å–∏–∏'
					, SpawnData: getFileInfoObj()
				}
			] : [
				{
					Key: 'ExeVersion'
					, Label: '–í–µ—Ä—Å–∏—è –∏–≥—Ä—ã: '
					, Width: '250px'
				}, {
					Type: 'spawner'
					, Key: 'FileGroups'
					, Label: '–ì—Ä—É–ø–ø—ã —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤–µ—Ä—Å–∏–∏'
					, SpawnData: getFileGroupObj()
				}, {
					Type: 'spawner'
					, Key: 'Files'
					, Label: '–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –≤–µ—Ä—Å–∏–∏'
					, SpawnData: getFileInfoObj()
				}
			];
		return {
			Label: '–í–µ—Ä—Å–∏—è –∏–≥—Ä—ã'
			, Class: 'gameversion'
			, Fields: fields
		}
	}

	function getFileGroupObj() {
		return {
			Label: '–ì—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤'
			, Class: 'filegroup'
			, Fields: [
				{
					Key: 'Name'
					, Label: '–ò–º—è –≥—Ä—É–ø–ø—ã: '
					, Width: '70%'
				}, {
					Key: 'Collapsed'
					, Type: 'check'
					, Label: '–°–≤—ë—Ä–Ω—É—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (WIP)'
					, Title: '–ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —ç–∫—Ä–∞–Ω–∞ –≥—Ä—É–ø–ø–∞ –±—É–¥–µ—Ç —Å–≤—ë—Ä–Ω—É—Ç–∞'
				}, {
					Key: 'OrderIndex'
					, ValType: 'int'
					, Label: '–ü–æ—Ä—è–¥–æ–∫: '
					, Title: '–¶–µ–ª–æ–µ —á–∏—Å–ª–æ. –ß–µ–º –æ–Ω–æ –±–æ–ª—å—à–µ, —Ç–µ–º –Ω–∏–∂–µ —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ —Ñ–∞–π–ª–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "1". –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "-99".'
					, Width: '50px'
				}, {
					Type: 'spawner'
					, Key: 'Files'
					, Label: '–§–∞–π–ª—ã –≤ –≥—Ä—É–ø–ø–µ'
					, SpawnData: getFileInfoObj()
				}
			]
		}
	}
	
	function getModVersionObj() {
		return {
			Label: '–í–µ—Ä—Å–∏—è –º–æ–¥–∞'
			, Class: 'modversion'
			, Fields: [
				{
					Key: 'VersionName'
					, Label: '–ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏: '
					, Width: '120px'
				}, {
					Key: 'VersionOrder'
					, Label: '–ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ (–±–æ–ª—å—à–µ = –Ω–æ–≤–µ–µ): '
					, ValType: 'int'
					, Width: '60px'
				}, {
					Key: 'Description'
					, Label: '–ê–ª—å—Ç. –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–∞: '
					, Width: '90%'
				}, {
					Key: 'DetailedDescription'
					, TextArea: true
					, Label: '–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–∞ (–¥–ª—è –≤–µ—Ä—Å–∏–∏), –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bb-–∫–æ–¥: '
					, Width: '550px'
					, Height: '80px'
				}, {
					Type: 'list'
					, Key: 'Conflicts'
					, Label: '–ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –º–æ–¥—ã (–ø–æ –æ–¥–Ω–æ–º—É ID –º–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É)'
					, Width: '550px'
				}, {
					Type: 'listoflists'
					, Key: 'Dependencies'
					, Label: '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–æ–≤ (–ø–æ –æ–¥–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ —Å—Ç—Ä–æ–∫—É, –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã–µ —Å—Ç–∞–≤—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —á–µ—Ä–µ–∑ –ø–∞–ª–∫—É | )'
					, Width: '550px'
				}, {
					Type: 'spawner'
					, Key: 'GameVersions'
					, Label: '–§–∞–π–ª—ã –¥–ª—è –≤–µ—Ä—Å–∏–π –∏–≥—Ä—ã'
					, SpawnData: getGameVersionObj(true)
				}
			]
		}
	}

	function getModMigrationObj() {
		return {
			Label: '–ò–∑–º–µ–Ω–µ–Ω–∏–µ ID –º–æ–¥–∞'
			, Class: 'modMigration'
			, Fields: [
				{
					Key: 'OldId'
					, Label: '–°—Ç–∞—Ä—ã–π ID: '
					, Width: '200px'
				}, {
					Key: 'NewId'
					, Label: '–ù–æ–≤—ã–π ID: '
					, Width: '200px'
				}
			]
		}
	}

	function getBgImageInfoObj(key, label) {
		return {
			Type: key ? 'spoiler' : '_spawn_'
			, Key: key || '_spawn_'
			, Label: label || '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ'
			, Fields: [
				{
					Key: 'Path'
					, Label: '–ò–º—è/–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É: '
					, Width: '70%'
				}, {
					Key: 'Url'
					, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª: '
					, Width: '90%'
				}, {
					Type: 'select'
					, Key: 'Layout'
					, Label: '–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏:'
					, Default: 'Stretch'
					, Options: [
						{ Value: 'None', Text: '–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –≤–µ—Ä—Ö–Ω–µ–º—É —É–≥–ª—É' }
						, { Value: 'Center', Text: '–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É' }
						, { Value: 'Stretch', Text: '–†–∞—Å—Ç—è–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É —ç–ª–µ–º–µ–Ω—Ç–∞', Selected: true }
						, { Value: 'Zoom', Text: '–ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–∞–∑–º–µ—Ä—É —ç–ª–µ–º–µ–Ω—Ç–∞' }
						, { Value: 'Tile', Text: '–ú–æ–∑–∞–∏—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –≤—Å–µ–π –æ–±–ª–∞—Å—Ç–∏' }
					]
				}, {
					Type: 'list'
					, Key: 'Hashes'
					, Label: '–°–ø–∏—Å–æ–∫ –≤–∞–ª–∏–¥–Ω—ã—Ö MD5-—Ö—ç—à–µ–π'
					, Width: '60%'
				}
			]
		};
	}

	function getVectorObj(key, label) {
		return {
			Type: key ? 'spoiler' : '_spawn_'
			, Key: key || '_spawn_'
			, Label: label || '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã'
			, Fields: [
				{
					Key: 'X'
					, ValType: 'int'
					, Label: 'X / –®–∏—Ä–∏–Ω–∞. –¶–µ–ª–æ–µ —á–∏—Å–ª–æ'
					, Width: '100px'
				}, {
					Key: 'Y'
					, ValType: 'int'
					, Label: 'Y / –í—ã—Å–æ—Ç–∞. –¶–µ–ª–æ–µ —á–∏—Å–ª–æ'
					, Width: '100px'
				}
			]
		};
	}

	function getUIElementObj(key, label) {
		return {
			Type: key ? 'spoiler' : '_spawn_'
			, Key: key || '_spawn_'
			, Label: label || '–≠–ª–µ–º–µ–Ω—Ç'
			, Fields: [
				{
					Key: 'Caption'
					, Label: '–¢–µ–∫—Å—Ç'
					, Width: '60%'
				}
				, getVectorObj('Position', '–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ')
				, getVectorObj('Size', '–†–∞–∑–º–µ—Ä')
				, {
					Key: 'CustomStyle'
					, Type: 'check'
					, Label: ' –°–≤–æ–π —Å—Ç–∏–ª—å - –±–µ–∑ —ç—Ç–æ–π –≥–∞–ª–∫–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –∏ —Ü–≤–µ—Ç —Ä–∞–º–∫–∏'
				}, {
					Key: 'Color'
					, Label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞: —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–∏—Ä–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (#xxxxxx, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º'
					, Width: '200px'
				}, {
					Key: 'BgColor'
					, Label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞: —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–∏—Ä–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (#xxxxxx, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º'
					, Width: '200px'
				}, {
					Key: 'BgColorHover'
					, Label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏'
					, Width: '200px'
				}, {
					Key: 'BgColorDown'
					, Label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏'
					, Width: '200px'
				}, {
					Key: 'BorderSize'
					, ValType: 'int'
					, Label: '–¢–æ–ª—â–∏–Ω–∞ —Ä–∞–º–∫–∏'
					, Title: '–¶–µ–ª–æ–µ —á–∏—Å–ª–æ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é -1, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–≤–Ω—è–µ—Ç—Å—è 1 –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –æ–∫–Ω–∞, –∏ 0 –¥–ª—è –ø—Ä–æ—á–∏—Ö –∫–Ω–æ–ø–æ–∫'
					, Width: '50px'
				}, {
					Key: 'BorderColor'
					, Label: '–¶–≤–µ—Ç —Ä–∞–º–∫–∏'
					, Width: '200px'
				}
				, getBgImageInfoObj('BgImage', '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ')
				, getBgImageInfoObj('BgImageClick', '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∂–∞—Ç–æ–π –º—ã—à–∏')
				, getBgImageInfoObj('BgImageHover', '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥—ë–Ω–Ω–æ–π –º—ã—à–∏')
				, {
					Key: 'Font'
					, Label: '–ù–∞–∑–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞'
					, Width: '200px'
				}, {
					Key: 'FontSize'
					, Label: '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö (—Ü–µ–ª–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)'
					, Width: '50px'
				}
			]
		};
	}
	function getLinkButtonObj(key, label) {
		var obj = getUIElementObj(key, label)
		obj.Fields.push({
			Key: 'Url'
			, Label: 'URL, –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é'
			, Width: '90%'
		})
		return obj
	}

	settingsRootBlock = new SettingsSpoiler({
		Label: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–∞—Ç—Ç–ª–µ–±—Ä–∞–∑–∑–µ—Ä—Å"
		, OpenByDefault: true
		, Fields: [
			{
				Type: 'field'
				, Key: 'GameName'
				, Label: '–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã: '
				, Width: '200px'
			}, {
				Type: 'field'
				, Key: 'ExeName'
				, Label: '–ò–º—è exe-—Ñ–∞–π–ª–∞: '
				, Width: '200px'
			}, {
				Type: 'field'
				, Key: 'LoncherLinkName'
				, Label: '–ò–º—è —è—Ä–ª—ã–∫–∞ –¥–ª—è –ª–∞—É–Ω—á–µ—Ä–∞: '
				, Width: '300px'
			}, {
				Type: 'field'
				, Key: 'GogID'
				, Label: 'GogID: '
				, Width: '100px'
			}, {
				Type: 'field'
				, Key: 'SteamID'
				, Label: 'SteamID: '
				, Width: '100px'
			}, {
				Type: 'field'
				, Key: 'SteamGameFolder'
				, Label: '–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –∏–≥—Ä—ã –≤ Steam: '
				, Width: '200px'
			}, {
				Type: 'spoiler'
				, Key: 'LoncherVersions'
				, Label: '–í–µ—Ä—Å–∏–∏ –ª–∞—É–Ω—á–µ—Ä–æ–≤'
				, Fields: [
					{
						Type: 'spoiler'
						, Key: 'Win7'
						, Label: 'Windows 7'
						, Fields: [
							{
								Type: 'field'
								, Key: 'OSName'
								, Label: '–ò–º—è –û–°: '
								, Width: '500px'
							}, {
								Type: 'field'
								, Key: 'LoncherExe'
								, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ª–∞—É–Ω—á–µ—Ä–∞: '
								, Width: '500px'
							}, {
								Type: 'field'
								, Key: 'LoncherHash'
								, Label: 'MD5 –ª–∞—É–Ω—á–µ—Ä–∞: '
								, Width: '500px'
							}, {
								Type: 'button'
								, Key: '__updateProps'
								, Class: 'fileUpdateProps'
								, Label: '–û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–∞–π–ª–∞'
								, Width: '40%'
								, Action: function(fields, fd, onSuccess, onFail) {
									var filename = fields.find(f => f.Key == 'LoncherExe').val()
									
									cfgApiCall(
										{
											action: 'getFileStats'
											, filename: filename
										}
										, function(data) {
											fields.find(f => f.Key == 'LoncherHash').val([data.Hash.toUpperCase()])
											if (onSuccess) {
												onSuccess(data.FileSize, data.Hash.toUpperCase())
											}
										}
										, onFail
									)
								}
							}
						]
					}, {
						Type: 'spoiler'
						, Key: 'Win10'
						, Label: 'Windows 10'
						, Fields: [
							{
								Type: 'field'
								, Key: 'OSName'
								, Label: '–ò–º—è –û–°: '
								, Width: '500px'
							}, {
								Type: 'field'
								, Key: 'LoncherExe'
								, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ª–∞—É–Ω—á–µ—Ä–∞: '
								, Width: '500px'
							}, {
								Type: 'field'
								, Key: 'LoncherHash'
								, Label: 'MD5 –ª–∞—É–Ω—á–µ—Ä–∞: '
								, Width: '500px'
							}, {
								Type: 'button'
								, Key: '__updateProps'
								, Class: 'fileUpdateProps'
								, Label: '–û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–∞–π–ª–∞'
								, Width: '40%'
								, Action: function(fields, fd, onSuccess, onFail) {
									var filename = fields.find(f => f.Key == 'LoncherExe').val()
									
									cfgApiCall(
										{
											action: 'getFileStats'
											, filename: filename
										}
										, function(data) {
											fields.find(f => f.Key == 'LoncherHash').val([data.Hash.toUpperCase()])
											if (onSuccess) {
												onSuccess(data.FileSize, data.Hash.toUpperCase())
											}
										}
										, onFail
									)
								}
							}
						]
					}
				]
			}, {
			/*	Type: 'field'
				, Key: 'LoncherExe'
				, Label: '[–£–°–¢–ê–†] –°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ª–∞—É–Ω—á–µ—Ä–∞: '
				, Width: '500px'
			}, {
				Type: 'field'
				, Key: 'LoncherHash'
				, Label: '[–£–°–¢–ê–†] MD5 –ª–∞—É–Ω—á–µ—Ä–∞: '
				, Width: '500px'
			}, {*/
				Type: 'field'
				, Key: 'Changelog'
				, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª —á–µ–Ω–∂–ª–æ–≥–∞: '
				, Width: '500px'
			}, {
				Type: 'field'
				, Key: 'FAQFile'
				, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª FAQ: '
				, Width: '500px'
			}, {
			/*	Type: 'field'
				, Key: 'ChangelogEscape'
				, Label: '–°–∏–º–≤–æ–ª –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–≤—ã—á–µ–∫ —á–µ–Ω–∂–ª–æ–≥–∞ (—É—Å—Ç–∞—Ä.): '
				, Title: '–°–∏–º–≤–æ–ª, –≤ –∫–∞–∫–∏–µ –∫–∞–≤—ã—á–∫–∏ –±–µ—Ä—ë—Ç—Å—è Changelog –ø—Ä–∏ –≤—Å–æ—Å—ã–≤–∞–Ω–∏–∏ –≤ ChangelogTemplate (—Ç.–µ. –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–±—Ä–∞–º–ª—ë–Ω [[[CHANGELOG]]] –≤ —Å–∞–º–æ–º ChangelogTemplate).'
				, Width: '40px'
			}, {
				Type: 'field'
				, Key: 'QuoteToEscape'
				, Label: '–°–∏–º–≤–æ–ª –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–≤—ã—á–µ–∫ –≤ —Ñ–∞–π–ª–∞—Ö: '
				, Title: '–°–∏–º–≤–æ–ª, –≤ –∫–∞–∫–∏–µ –∫–∞–≤—ã—á–∫–∏ –±–µ—Ä—ë—Ç—Å—è Changelog –ø—Ä–∏ –≤—Å–æ–≤—ã–≤–∞–Ω–∏–∏ –≤ ChangelogTemplate (—Ç.–µ. –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–±—Ä–∞–º–ª—ë–Ω [[[CHANGELOG]]] –≤ —Å–∞–º–æ–º ChangelogTemplate).'
				, Width: '40px'
			}, {*/
				Type: 'select'
				, Key: 'StartPage'
				, Label: '–û—Ç–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ: '
				, Title: '–≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ª–∞—É–Ω—á–µ—Ä–∞. –ï—ë –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —É —Ç–µ—Ö, –∫—Ç–æ —É–∂–µ –ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∞—É–Ω—á–µ—Ä–æ–º - —Ç–∞–º –±—É–¥–µ—Ç –∑–∞–ø–æ–º–Ω–µ–Ω–æ –ª–∏–±–æ –ø—Ä–æ—à–ª–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.'
				, Default: 'Status'
				, Options: [
					{ Value: 'Status', Text: '–°—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–æ–≤', Selected: true }
					, { Value: 'Changelog', Text: '–ß–µ–Ω–∂–ª–æ–≥' }
					, { Value: 'Links', Text: '–°—Å—ã–ª–∫–∏' }
				]
			}, {
				Type: 'spoiler'
				, Key: 'UIStyle'
				, Label: '–®–∞–±–ª–æ–Ω—ã –∏ —Å—Ç–∏–ª–∏ —ç–∫—Ä–∞–Ω–æ–≤'
				, Fields: [
					getFileInfoObj('MainPage', '–ì–ª–∞–≤–Ω–∞—è, –º–∞—Ç—å –µ—ë, —Å—Ç—Ä–∞–Ω–∏—Ü–∞')
					, getFileInfoObj('Changelog', '–®–∞–±–ª–æ–Ω —á–µ–Ω–∂–ª–æ–≥–∞')
					, getFileInfoObj('FAQ', '–®–∞–±–ª–æ–Ω FAQ')
					, getFileInfoObj('TemplateLib', '–û–±—â–∏–π –∫–æ–¥ –¥–ª—è head —à–∞–±–ª–æ–Ω–æ–≤', '–í—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–µ–≥ head —ç–∫—Ä–∞–Ω–æ–≤ —Å—Ç–∞—Ç—É—Å–∞, FAQ, —á–µ–Ω–¥–∂–ª–æ–≥–∞ –∏ –º–æ–¥–æ–≤. –í —Å–ª—É—á–∞–µ —Å faq –∏ —á–µ–Ω–¥–∂–ª–æ–≥–æ–º - –µ—Å–ª–∏ –¥–ª—è –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—ã—Ä–æ–π html, –∞ –Ω–µ url')
				]
			}, {
				Type: 'spawner'
				, Key: 'Assets'
				, Label: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã'
				, Title: '–§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–∫–∞—á–∞–Ω—ã, –Ω–æ –Ω–µ –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è —è–¥—Ä–æ–º –ª–∞—É–Ω—á–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ—Ç–∫—Ä—ã–≤–∞–µ–º–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ –≤ –ª–∞—É–Ω—á–µ—Ä–µ.'
				, SpawnData: getFileInfoObj()
			}
			, getBgImageInfoObj('Background', '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–∫–Ω–∞')
			, {
				Type: 'spawner'
				, Key: 'RandomBackgrounds'
				, Label: '–°–ª—É—á–∞–π–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ–Ω—ã'
				, SpawnData: {
					Label: '–°–ª—É—á–∞–π–Ω—ã–π —Ñ–æ–Ω'
					, Fields: [
						{
							Key: 'Chance'
							, ValType: 'int'
							, Label: '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç—Ç–æ–≥–æ —Ñ–æ–Ω–∞ –≤ –ø—Ä–æ–º–∏–ª–ª–µ, —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 1000'
							, Width: '100px'
						}
						, getBgImageInfoObj('Background', '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–∫–Ω–∞')
					]
				}
			}
			, getFileInfoObj('PreloaderBackground', '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–ª—ç—à–∞')
			, getFileInfoObj('Icon', '–ò–∫–æ–Ω–∫–∞')
			, getFileInfoObj('Localization', '–í–Ω–µ—à–Ω–∏–π —Ñ–∞–π–ª –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏', undefined, 'localeFile')
			, {
				Type: 'spawner'
				, Key: 'GameVersions'
				, Label: '–í–µ—Ä—Å–∏–∏ –∏–≥—Ä—ã'
				, Class: 'gameVersions'
				, SpawnData: getGameVersionObj()
			}
			, {
				Type: 'spawner'
				, Key: 'ModGroups'
				, Class: 'modSpawner'
				, Label: '–ì—Ä—É–ø–ø—ã –º–æ–¥–æ–≤'
				, SpawnData: {
					DisplayField: 'Name'
					, Label: function(fields) {
						let name = fields.find(f => f.Key == 'Name').val()
						let id = fields.find(f => f.Key == 'Id').val()
						return '[' + (id ? id : 'XX') + '] ' + (name ? name : '–ë–µ–∑—ã–º—è–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞')
					}
					, Class: 'modGroupSpawn'
					, IsSpoiler: true
					, Fields: [
						{
							Key: 'Name'
							, Label: '–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã: '
							, Width: '300px'
						}, {
							Key: 'Id'
							, Label: '–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –≥—Ä—É–ø–ø—ã: '
							, Width: '250px'
						}
					]
				}
			}
			, {
				Type: 'spawner'
				, Key: 'ModMigrate'
				, Class: 'modSpawner'
				, Label: '–ú–∏–≥—Ä–∞—Ü–∏—è –º–æ–¥–æ–≤ (–∏–∑–º–µ–Ω–∏–ª—Å—è ID)'
				, SpawnData: getModMigrationObj()
			}
			, {
				Type: 'spawner'
				, Key: 'Mods'
				, Class: 'modSpawner'
				, Label: '–ú–æ–¥—ã'
				, SpawnData: {
					DisplayField: 'Name'
					, Label: function(fields) {
						let name = fields.find(f => f.Key == 'Name').val()
						let id = fields.find(f => f.Key == 'Id').val()
						return '[' + (id ? id : 'XX') + '] ' + (name ? name : '–ù–µ–Ω–∞–∑–≤–∞–Ω–Ω—ã–π –º–æ–¥')
					}
					, Class: 'modSpawn'
					, IsSpoiler: true
					, Fields: [
						{
							Key: 'Name'
							, Label: '–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞: '
							, Width: '300px'
						}, {
							Key: 'Id'
							, Label: '–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –º–æ–¥–∞: '
							, Width: '250px'
						}, {
							Key: 'GroupId'
							, Label: 'ID –≥—Ä—É–ø–ø—ã –º–æ–¥–æ–≤: '
							, Width: '250px'
						}, {
							Key: 'IsHidden'
							, Type: 'check'
							, Label: '–°–∫—Ä—ã—Ç—ã–π (—Ä–∞–∑—Ä–∞–±—á–µ—Å–∫–∏–π)'
						}, {
							Key: 'HasExecutable'
							, Type: 'check'
							, Label: '–ò–º–µ–µ—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª'
						}, {
							Type: 'list'
							, Key: 'Conflicts'
							, Label: '–ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –º–æ–¥—ã (–ø–æ –æ–¥–Ω–æ–º—É ID –º–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É)'
							, Width: '550px'
						}, {
							Type: 'listoflists'
							, Key: 'Dependencies'
							, Label: '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–æ–≤ (–ø–æ –æ–¥–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ —Å—Ç—Ä–æ–∫—É, –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã–µ —Å—Ç–∞–≤—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —á–µ—Ä–µ–∑ –ø–∞–ª–∫—É | )'
							, Width: '550px'
						}, {
							Key: 'Description'
							, Label: '–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–∞: '
							, TextArea: true
							, Width: '550px'
							, Height: '60px'
						}, {
							Key: 'DetailedDescription'
							, TextArea: true
							, Label: '–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bb-–∫–æ–¥: '
							, Width: '550px'
							, Height: '80px'
						}, {
							Type: 'list'
							, Key: 'Screenshots'
							, Label: '–ì–∞–ª–µ—Ä–µ—è (url-—ã —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤)'
							, Width: '550px'
						}, {
							Type: 'spawner'
							, Key: 'GameVersions'
							, Label: '–í–µ—Ä—Å–∏–∏ –∏–≥—Ä—ã –¥–ª—è –º–æ–¥–∞'
							, SpawnData: getModVersionObj()
						}
					]
				}
			}
			, {
				Type: 'spawner'
				, Key: 'Buttons'
				, Label: '–ö–Ω–æ–ø–∫–∏-—Å—Å—ã–ª–∫–∏'
				, SpawnData: getLinkButtonObj()
			}
			, {
				Type: 'spoiler'
				, Key: 'Survey'
				, Label: '–û–ø—Ä–æ—Å, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ª–∞—É–Ω—á–µ—Ä–∞'
				, Fields: [
					{
						Key: 'ID'
						, Label: 'ID –æ–ø—Ä–æ—Å–∞ (–ª—é–±–æ–π, –Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)'
						, Width: '200px'
					}
					, {
						Key: 'Url'
						, Label: '–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø—Ä–æ—Å'
						, Width: '500px'
					}
					, {
						Key: 'Text'
						, Label: '–¢–µ–∫—Å—Ç'
						, Width: '500px'
					}
				]
			}
			, {
				Type: 'spoiler'
				, Key: 'UI'
				, Label: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞'
				, Fields: [
					getUIElementObj('BasePanel', '–ë–∞–∑–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (–ø–æ–¥–ª–æ–∂–∫–∞ –ø–æ–¥ –≤—Å–µ–º–∏ –ø–∞–Ω–µ–ª—è–º–∏)')
					, getUIElementObj('StatusPanel', '–ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞')
					, getUIElementObj('ChangelogPanel', '–ü–∞–Ω–µ–ª—å –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π')
					, getUIElementObj('LinksPanel', '–ü–∞–Ω–µ–ª—å —Å—Å—ã–ª–æ–∫')
					, getUIElementObj('ModsPanel', '–ü–∞–Ω–µ–ª—å –º–æ–¥–æ–≤')
					, getUIElementObj('UpdateLabel', '–ù–∞–¥–ø–∏—Å—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∫–æ—Ç–æ—Ä–∞—è –Ω–∞–¥ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º)')
					, getUIElementObj('LaunchButton', '–ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞')
					, getUIElementObj('SettingsButton', '–ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"')
					, getUIElementObj('StatusButton', '–ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–æ–≤"')
					, getUIElementObj('ChangelogButton', '–ö–Ω–æ–ø–∫–∞ "–ù–æ–≤–æ—Å—Ç–∏/–∏–∑–º–µ–Ω–µ–Ω–∏—è"')
					, getUIElementObj('LinksButton', '–ö–Ω–æ–ø–∫–∞ "–°—Å—ã–ª–∫–∏"')
					, getUIElementObj('ModsButton', '–ö–Ω–æ–ø–∫–∞ "–ú–æ–¥—ã"')
					, getUIElementObj('FAQButton', '–ö–Ω–æ–ø–∫–∞ "FAQ"')
					, getUIElementObj('CloseButton', '–ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å" (–∫—Ä–µ—Å—Ç–∏–∫)')
					, getUIElementObj('MinimizeButton', '–ö–Ω–æ–ø–∫–∞ "–°–≤–µ—Ä–Ω—É—Ç—å"')
					, getUIElementObj('HelpButton', '–ö–Ω–æ–ø–∫–∞ "–û –ø—Ä–æ–≥—Ä–∞–º–º–µ"')
				]
			}
		]
	})

	var thePage = _ge("settingsContainer")

	thePage.appendChild(settingsRootBlock.Container$[0])
	settingsRootBlock.Content$.addClass('base')

	adminIdInput$ = $('#adminId')
	changelog$ = $('#changelogText')
	faq$ = $('#faqText')
	donate$ = $('#donateText')

	if (CookieObject.adminId) {
		adminIdInput$.val(CookieObject.adminId)
		adminIdSet = true
		adminId = CookieObject.adminId
	}

	$.ajax({
		url: "settings.json"
		, dataType: "json"
		, success: function(data) {
			settingsRootBlock.val(data)

			$.ajax({
				url: "changelog.html"
				, dataType: "text"
				, success: function(data) {
					changelog$.val(data)

					$.ajax({
						url: "faq.html"
						, dataType: "text"
						, success: function(data) {
							faq$.val(data)

							$.ajax({
								url: "donate.html"
								, dataType: "text"
								, success: function(data) {
									donate$.val(data)
									$('#loadLocale').click()
								}
								, error: function(xr, errortext, exception) {
									loadingBlocker$.hide()
									alert(errortext + ":\r\n" + exception)
								}
							})
						}
						, error: function(xr, errortext, exception) {
							loadingBlocker$.hide()
							alert(errortext + ":\r\n" + exception)
						}
					})
				}
				, error: function(xr, errortext, exception) {
					loadingBlocker$.hide()
					alert(errortext + ":\r\n" + exception)
				}
			})
		}
		, error: function(xr, errortext, exception) {
			loadingBlocker$.hide()
			alert(errortext + ":\r\n" + exception)
		}
	})

	$('#saveChangelog').click(function() {
		cfgApiCall(
			{
				action: 'writeChangelog'
				, changelog: $('#changelogText').val()
			}
			, '–ß–µ–Ω–¥–∂–ª–æ–≥ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!'
		)
	})

	$('#saveFAQ').click(function() {
		cfgApiCall(
			{
				action: 'writeFAQ'
				, faq: faq$.val()
			}
			, '–§–ê–ö —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!'
		)
	})

	$('#saveDonate').click(function() {
		cfgApiCall(
			{
				action: 'writeDonate'
				, donatetext: donate$.val()
			}
			, '–î–æ–Ω–∞—Ç–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!'
		)
	})

	$('#saveSettings').click(function() {
		cfgApiCall(
			{
				action: 'writeConfig'
				, config: JSON.stringify(settingsRootBlock.val(), false, 4)
			}
			, '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!'
		)
	})

	$('#updateAllFiles').click(function() {
		let dialog = $('#dialog')
		dialog.empty()
		dialog.append($('<div class="closeBtn">X</div>').click(function(e) {
			dialog.hide()
		}))
		files = $('.fileinfo')
		for (let file of files) {
			(function (fileEl) {
				let fval = fileEl._settingField.val()
				dialog.append(
					$('<div class="fileRecord">').append(
						$('<div class="name">').text(fval.Path)
						, $('<div class="hash">').text('MD5: ' + (fval.Hashes ? fval.Hashes.join(', ') : 'NONE'))
						, $('<div class="size">').text('–†–∞–∑–º–µ—Ä: ' + (fval.Size ? fval.Size : 'NONE'))
						, $('<div class="update settingButton">').text('–û–±–Ω–æ–≤–∏—Ç—å').click(function(e) {
							let btn = $(fileEl).find('.fileUpdateProps')
							if (btn.length) {
								let parent = $(this).parent()
								parent.addClass('outdated')
								btn[0]._settingField.Activate(function(size, hash) {
									parent.removeClass('outdated')
									parent.find('.hash').text('MD5: ' + (hash || 'NONE'))
									parent.find('.size').text('–†–∞–∑–º–µ—Ä: ' + size)
								}, function() {
									parent.removeClass('outdated')
								})
							}
						})
					)
				)
			})(file)
		}
		dialog.show()
	})

	$('#loadChangelog').click(function() {
		$.ajax({
			url: "changelog.html"
			, dataType: "text"
			, success: function(data) {
				changelog$.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})
	$('#loadFAQ').click(function() {
		$.ajax({
			url: "faq.html"
			, dataType: "text"
			, success: function(data) {
				faq$.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})
	$('#loadDonate').click(function() {
		$.ajax({
			url: "donate.html"
			, dataType: "text"
			, success: function(data) {
				donate$.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})
	$('#loadSettings').click(function() {
		$.ajax({
			url: "settings.json"
			, dataType: "json"
			, success: function(data) {
				settingsRootBlock.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})

	let locale_ = []
	let localeMap_ = []
	let locSelect$ = $('#locLinesSelect')
	let locOrig$ = $('#locOriginal')
	let locOverride$ = $('#locOverride')

	$('#loadLocale').click(function() {
		$.ajax({
			url: "loc.txt"
			, dataType: "text"
			, success: function(data) {
				let loc_n = data.split('\n')
				$.ajax({
					url: "assets/locale_default.txt"
					, dataType: "text"
					, success: function(data) {
						loadingBlocker$.hide()
						
						let loc_d = data.split('\n')
						locale_ = []
						for (let s of loc_d) {
							let eqidx = s.indexOf('=')
							if (eqidx > 0) {
								let kv = {
									key: s.substring(0, eqidx).trim()
									, orig: s.substring(eqidx + 1).trim()
								}
								locale_.push(kv)
								localeMap_[kv.key] = kv
							}
						}
						for (let s of loc_n) {
							let eqidx = s.indexOf('=')
							if (eqidx > 0) {
								let key = s.substring(0, eqidx).trim()
								if (localeMap_[key]) {
									localeMap_[key].override = s.substring(eqidx + 1).trim()
								}
							}
						}
						locSelect$.append(locale_.map(x => $('<option>').text(x.key).attr('value', x.key)))
					}
					, error: function(xr, errortext, exception) {
						loadingBlocker$.hide()
						alert(errortext + ":\r\n" + exception)
					}
				})
			}
			, error: function(xr, errortext, exception) {
				loadingBlocker$.hide()
				alert(errortext + ":\r\n" + exception)
			}
		})
	})

	locSelect$.on('change', function() {
		let kv = localeMap_[this.value]
		locOrig$.val(kv.orig)
		locOverride$.val(kv.override || '')
	})

	$('#applyLine').click(function() {
		localeMap_[locSelect$.val()].override = locOverride$.val()
	})
	
	$('#saveLocale').click(function() {
		var locStr = locale_.filter(x => !!x.override).map(x => x.key + ' = ' + x.override).join('\r\n')
		cfgApiCall(
			{
				action: 'writeLocale'
				, localeText: locStr
			}
			, function() {
				alert("\r\n\r\n–ü–µ—Ä–µ–≤–æ–¥ –ª–∞—É–Ω—á–µ—Ä–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!\r\n\r\n")
				$('.settingInputContainer.localeFile .fileUpdateProps .settingButton').click()
			}
		)
	})

	$('.sideBtn').click(function() {
		let dialid = $(this).attr('dialogclass')
		if (dialid) {
			$('#' + dialid).toggle()
			$('.sidePanelDialog:not(#' + dialid + ')').hide()
		}
	})
	$('.sidePanelDialog .closeBtn').click(function() {
		$(this).parent().hide()
	})
	$('.sidePanelDialog').hide()

	/*$('#loadBkpChangelog').click(function() {
		$.ajax({
			url: "test/changelog_.html"
			, dataType: "text"
			, success: function(data) {
				changelog$.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})
	$('#loadBkpFAQ').click(function() {
		$.ajax({
			url: "test/faq_.html"
			, dataType: "text"
			, success: function(data) {
				faq$.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})
	$('#loadBkpSettings').click(function() {
		$.ajax({
			url: "test/settings_.json"
			, dataType: "json"
			, success: function(data) {
				settingsRootBlock.val(data)
			}
			, error: function(xr, errortext, exception) {
				alert(errortext + ":\r\n" + exception)
			}
		})
	})*/
})();

});
</script>

<style>
textarea, input {
	font-family: Consolas, monospace;
}

input[type="checkbox"].settingInput {
	margin: 1px 6px 1px 2px;
	scale: 1.05;
}

#loadingBlocker {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100vh;
	z-index: 99999;
	cursor: wait;
	background-color: #a0a2a92b;
}

#pineQuotes
, #dlTranslationJson
, #dlTranslationJs
, #dlTranslationJsEn
, #applyDictionaryToUntranslated
, .defBtn {
	display: block;
	width: 40%;
	padding: 10px;
	text-align: center;
	margin: 10px;
	cursor: pointer;
	border: 1px solid #707070;
	border-radius: 4px;
}
#pineQuotes:hover
, #dlTranslationJson:hover
, #dlTranslationJs:hover
, #dlTranslationJsEn:hover
, #applyDictionaryToUntranslated:hover
, .defBtn:hover
, .mainSettings .defBtn:hover {
	background: #d0e0ff;
}
.buttonRow {
	position: relative;
	display: flex;
	place-content: space-between;
    align-items: center;
    flex-direction: row;
}
.mainSettings.buttonRow {
	position: fixed;
	display: flex;
	left: 0px;
	bottom: 0px;
    align-items: center;
    flex-direction: column;
	border: 2px solid #999;
	border-width: 2px 2px 0 0;
	border-top-right-radius: 5px;
	background-color: #e0e0e0;
	min-width: 120px;
	width: calc(50vw - 420px);
	padding: 18px 18px 20px 20px;
	gap: 20px;
}
.mainSettings .defBtn {
	margin: 0;
	background: #fff;
	width: 100%;
}
.inpText {
	width: 100%;
	font-family: consolas;
	font-size: 13.3px;
}
.settingButton
, .closeBtn
{
	display: inline-flex;
	border: 1px solid #c0c0c0;
	border-radius: 4px;
	cursor: pointer;
	padding: 3px 7px 3px 6px;
	background-image: linear-gradient(0deg, #c0c0c040, transparent 60%);
	place-content: center;
	align-items: center;
}

.settingInputContainer .modSpawner {
	background-color: #d5d8d9;
}

.settingInputContainer .singleFilesForVersion {
	background-color: #dfd8cb;
}
.settingInputContainer .groupedFilesForVersion {
	background-color: #c8d9db;
}

/*.settingInputContainer .modSpawn
, .settingInputContainer .modSpawn > .settingSpoilerContent
, .settingInputContainer .modSpawn > .settingSpoilerContent > .settingInputContainer:not(.spawner) {
	background-color: #e9f5fA;
}*/

/*#loadChangelog
, #loadSettings
, #loadFAQ
, #loadBkpSettings
, #loadBkpChangelog {
	position: absolute;
	right: 180px;
	width: 170px;
	padding: 2px 10px;
    top: 0;
    
    margin: 0 10px;
	right: 0;
}
#loadBkpSettings
, #loadBkpChangelog {
    right: 0;
}*/
.article-content {
	padding: 12px 24px 0 30px;
}
.kbHeader a {
	vertical-align: bottom;
}
input[type="text"] {
	display: block;
	margin-top: 2px;
}
.settingLabel {
	display: block;
	padding-bottom: 4px;
	min-height: 21px;
	width: calc(100% - 100px);
}
.settingInputContainer.check .settingLabel {
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: flex-start;
}

#settingsContainer {
	font-size: 13px;
}
#settingsContainer input[type=text],
#settingsContainer textarea,
#settingsContainer select {
	font-size: 12px;
}
.settingInputContainer {
	background: #fff;
	position: relative;
	padding: 6px 5px;
}
.settingInputContainer.spawner
, .settingInputContainer.spawn
, .settingInputContainer.spoiler
{
	border: 1px #d0d1d1 solid;
	border-radius: 4px;
	margin: 5px 0px;
}
.settingSpoilerTitle {
	background: url('spoiler_up.png') #f0f0f0 no-repeat;
	background-position: 5px center;
	padding-left: 30px;
	background-size: 17px;
	cursor: pointer;
	width: calc(100% - 33px);
	border-radius: 2px;
	min-height: 21px;
	display: flex;
	align-items: center;
}
.settingSpoilerTitle.hidden {
	background-image: url('spoiler_down.png') !important;
}
.spawn > .settingSpoilerTitle {
	width: calc(100% - 132px);
}
.settingSpawnerMinus
, .settingSpawnerPlus
, .settingSpawnerUp
, .settingSpawnerDown
, .settingSpawnerDuplicate
{
	display: flex;
	position: absolute;
	width: 28px;
	height: 21px;
	top: 6px;
	right: 5px;
	border: 1px solid #c0c0c0;
	border-radius: 4px;
	background-color: #fff;
	cursor: pointer;
	font-size: 20px;
	font-family: Consolas, monospace;
	place-content: center;
	align-items: center;
}
.settingSpawnerUp {
	right: 38px;
}
.settingSpawnerDown {
	right: 71px;
	padding-bottom: 3.5px;
}
.settingSpawnerDuplicate {
	right: 104px;
	font-size: 14px;
	padding-top: 2px;
}
.settingSpawnerPlusIncontent {
	display: flex;
    width: 64px;
    height: 56px;
    border: 1px solid #c0c0c0;
	background-color: #fff;
    margin-top: 6px;
    padding-bottom: 3px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 35px;
    font-family: Consolas, monospace;
    place-content: center;
    align-items: center;
}
.settingSpawnerPlusIncontent:hover
, .settingSpawnerMinus:hover
, .settingSpawnerPlus:hover
, .settingSpawnerUp:hover
, .settingSpawnerDown:hover
, .settingSpawnerDuplicate:hover
, .settingButton:hover
, .closeBtn:hover
{
	border: 1px solid #a0a0a0;
	background-color: #d0d0d0;
}

/*.settingSpoilerContent:not(.base) {
    position: fixed;
    top: 10vh;
    left: 200px;
    box-shadow: #222 0px 2px 100px;
    width: 700px;
    max-height: 80vh;
    overflow-y: auto;
    overflow-x: visible;
    margin: 0;
    padding: 5px 10px;
    border-radius: 10px;
    background-color: #fff;
}*/

.sideBtnPanel {
	position: fixed;
	top: 0px;
	left: 0px;
	z-index: 2;
	display: flex;
	transform: rotate(90deg);
	transform-origin: 0 100%;
}

.sideBtn {
	padding: 5px 6px 7px;
	margin: 5px 8px 0 0;
	border: 2px solid #999;
	border-bottom: 0;
	border-radius: 5px 5px 0 0;
	font-size: 1.35em;
	color: #606060;
	background-color: #e0e0e0;
	cursor: pointer;
}
.sideBtn:hover {
	background-color: #fff;
	margin-top: 0;
}
.sidePanelDialog {
	z-index: 1;
	position: fixed;
	top: 32px;
	left: 0px;
	width: min(80%, 1000px);
	overflow-y: auto;
	padding: 6px 10px 6px 80px;
	border: 2px solid #999;
	border-left: 0;
	border-radius: 0 7px 7px 0;
	font-size: 1.07em;
	color: #101010;
	display: none;
	background-color: #f0f0f0;
}
#BBcodeHelp {
	width: min(70%, 600px);
	max-height: calc(100% - 72px);
}
.sidePanelDialog:not(#BBcodeHelp) {
	height: calc(100% - 72px);
	display: flex;
	flex-direction: column;
}
.sidePanelDialog textarea {
	resize: none;
	margin-bottom: 8px;
}
.sidePanelDialog textarea:not(.noresize) {
	flex-grow: 1;
	flex-shrink: 1;
}
#BBcodeHelp p {
	
}
#dialog {
	position: fixed;
	top: 10%;
	left: 10%;
	width: 80%;
	height: 80%;
	overflow-y: auto;
	padding: 6px 10px 6px 30px;
	border: 2px solid #999;
	border-radius: 5px;
	font-size: 1.07em;
	color: #101010;
	display: none;
	background-color: #f0f0f0;
	box-shadow: 0 10px 100px #333;
}

#dialog .closeBtn {
	position: fixed;
	z-index: 1;
	right: calc(10% - 40px);
	top: 10.5%;
	border-radius: 0 10px 10px 0;
	width: 40px;
	height: 40px;
	background-color: #900;
	color: #fff;
	text-shadow: 1px 1px 1px #000;
}

.sidePanelDialog .closeBtn {
	position: absolute;
	right: 6px;
	top: 6px;
	width: 30px;
	height: 30px;
	background-color: #900;
	color: #fff;
	text-shadow: 1px 1px 1px #000;
}

h3 {
	margin: 10px 2px 14px;
}

.fileRecord {
	display: flex;
	position: relative;
	border: 1px solid #ccc;
	margin-bottom: 10px;
	flex-direction: column;
	gap: 4px;
}

.fileRecord .update {
	position: absolute;
	top: 0;
	right: 0;
}
.fileRecord.outdated {
	opacity: 0.25;
}

.locFieldContainer {
	display: flex;
	flex-grow: 1;
	gap: 12px;
	margin-bottom: 20px;
}
#locLinesSelect {
	width: 200px;
}
.locFieldTAContainer {
	display: flex;
	flex-direction: column;
	flex-grow: 1;
	gap: 4px;
}
#applyLine {
	margin: 0;
	width: 200px;
}

#locOriginal
, #locOverride
{
	font-size: 1.05em;
}
</style>
</head>
<body>

<iframe id="my_iframe" style="display:none;" download="ru_ru.json"></iframe>

<div class='page-content'>

<div class="kbHeader"><a href='#'>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –ª–æ–Ω—á–µ—Ä–∞<br>Battle Brothers</a><span></span></div>

<div class='page-content-grid'>


<div class='article-content'>
–í–∞—à ID –∞–¥–º–∏–Ω–∞: <input id='adminId' style="width:80%; margin: 10px;" autocomplete=off></input><br>

<div id='ChangelogDialog' class='sidePanelDialog'>
	<div class="closeBtn">X</div>
	<h3>Changelog:</h3>
	<textarea id="changelogText" class="inpText" rows="26" autocomplete=off></textarea>
	<div class='buttonRow'>
	<div id='saveChangelog' class='defBtn'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ–Ω–∂–ª–æ–≥</div><div id='loadChangelog' class='defBtn'>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ–Ω–∂–ª–æ–≥ –∏–∑ —Ñ–∞–π–ª–∞</div><!--<div id='loadBkpChangelog'>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏</div>-->
	</div>
</div>
<div id='FAQDialog' class='sidePanelDialog'>
	<div class="closeBtn">X</div>
	<h3>FAQ:</h3>
	<textarea id="faqText" class="inpText" rows="26" autocomplete=off></textarea>
	<div class='buttonRow'>
	<div id='saveFAQ' class='defBtn'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å FAQ</div><div id='loadFAQ' class='defBtn'>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å FAQ –∏–∑ —Ñ–∞–π–ª–∞</div><!--<div id='loadBkpChangelog'>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏</div>-->
	</div>
</div>
<div id='DonateDialog' class='sidePanelDialog'>
	<div class="closeBtn">X</div>
	<h3>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–Ω—á–∏–∫–æ–≤:</h3>
	<textarea id="donateText" class="inpText" rows="6" autocomplete=off></textarea>
	<div class='buttonRow'>
	<div id='saveDonate' class='defBtn'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–æ—à–µ–Ω–∏—è</div><div id='loadDonate' class='defBtn'>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–æ—à–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞</div><!--<div id='loadBkpChangelog'>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏</div>-->
	</div>
</div>
<div id='BBcodeHelp' class='sidePanelDialog'>
	<div class="closeBtn">X</div>
	<p><b>[B][/B]</b> - <b>–∂–∏—Ä–Ω—ã–π</b>
	</p><p><b>[I][/I]</b> - <i>–∫—É—Ä—Å–∏–≤–Ω—ã–π</i>
	</p><p><b>[S][/S]</b> - <s>–∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π</s>
	</p><p><b>[U][/U]</b> - <u>–ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π</u>
	</p><p><b>[N]</b> - –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏. –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;br&gt; –∏–ª–∏ '\n', –Ω–æ –Ω–µ "\n"
	</p><p><b>[UL][/UL]</b> - –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞
	</p><p><b>[LI][/LI]</b> - —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
	</p><p><b>[URL=—Å—Å—ã–ª–∫–∞][/URL]</b> - —Å—Å—ã–ª–∫–∞. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–µ–∑ –∫–∞–≤—ã—á–µ–∫, –∏ –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Ä–µ—Å—É—Ä—Å, —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http/https. –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –Ω–µ—Ç, –µ–≥–æ –∏ –Ω–µ –±—É–¥–µ—Ç. –£ –Ω–∞—Å –Ω–µ —Ç–∞–∫–∏–µ —É–º–Ω—ã–µ –±–±–∫–æ–¥—ã, –∫–∞–∫ –Ω–∞ —Ñ–æ—Ä—É–º–∞—Ö.
	</p><p><b>[COLOR=#–¶–í–ï–¢][/COLOR]</b> - –º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞. –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —Å—Ç—Ä–æ–∫ —Ü–≤–µ—Ç —Å–ª–µ–¥—É–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ.
	</p><p><b>[HL=#–¶–í–ï–¢][/HL]</b> - "—Ö–∞–π–ª–∞–π—Ç–µ—Ä", –≤—ã–¥–µ–ª—è–µ—Ç —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ —Ñ–æ–Ω–æ–≤—ã–º —Ü–≤–µ—Ç–æ–º.  –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —Å—Ç—Ä–æ–∫ —Å–ª–µ–¥—É–µ—Ç –≤—ã–¥–µ–ª—è—Ç—å –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ.
	</p>
</div>
<div id='LocaleDialog' class='sidePanelDialog'>
	<div class="closeBtn">X</div>
	<h3>–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–æ–∫ –ª–∞—É–Ω—á–µ—Ä–∞</h3>
	<div class='locFieldContainer'>
		<select multiple id='locLinesSelect'></select>
		<div class='locFieldTAContainer'>
			<textarea id="locOriginal" class="inpText" readonly autocomplete=off></textarea>
			<textarea id="locOverride" class="inpText" autocomplete=off></textarea>
			<div id='applyLine' class='defBtn'>–ü—Ä–∏–º–µ–Ω–∏—Ç—å</div>
		</div>
	</div>
	
	<div class='buttonRow'>
		<div id='saveLocale' class='defBtn'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å</div>
		<div id='loadLocale' class='defBtn'>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å –∏–∑ —Ñ–∞–π–ª–∞</div>
	</div>
</div>
<div id='settingsContainer'></div>
<div class='buttonRow mainSettings'>
<div id='saveSettings' class='defBtn'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
<div id='loadSettings' class='defBtn'>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞</div>
<div id='updateAllFiles' class='defBtn'>–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤</div>
<!--<div id='loadBkpSettings'>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏</div>-->
</div>

</div>

</div>
</div>

<div class='sideBtnPanel'>
<div id='BBcodeHelpBtn' class='sideBtn' dialogclass='BBcodeHelp'>[BB]</div>
<div id='ShowChangelogBtn' class='sideBtn' dialogclass='ChangelogDialog'>–õ–æ–≥</div>
<div id='ShowFaqBtn' class='sideBtn' dialogclass='FAQDialog'>FAQ</div>
<div id='ShowDonateBtn' class='sideBtn' dialogclass='DonateDialog'>–î–æ–Ω–∞—Ç</div>
<div id='ShowLocaleBtn' class='sideBtn' dialogclass='LocaleDialog'>–õ–æ–∫–∞–ª—å</div>
</div>

<div id='dialog'></div>
<div id='loadingBlocker'></div>
</body>
</html>